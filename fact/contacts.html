<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>FACT</title>
    <link rel="stylesheet" type="text/css" href="css/contacts.css">
<!--    <script type="text/javascript" src="scripts/form.js"></script>-->
</head>
<body>
<div id="margin-wrapper">
    <div id="max-width-wrapper">

        <nav id="nav">
            <ul class="l-4-col-grid-container">
                <li>
                    <a href="index.html"><h1 class="nav-list-item" id="nav-home">Fact</h1></a>
                </li>
                <li class="l-centered-flex-container">
                    <div id="nav-projects-container">
                        <a href="index.html"><h1 class="nav-list-item">Projects</h1></a>
                        <ul id="nav-projects-dropdown">
                            <li>
                                <a href="ordered_projects.html"><h2 class="nav-dropdown-list-item">Year</h2></a>
                            </li>
                            <li>
                                <a href="ordered_projects.html"><h2 class="nav-dropdown-list-item">Function</h2></a>
                            </li>
                            <li>
                                <a href="ordered_projects.html"><h2 class="nav-dropdown-list-item">Status</h2></a>
                            </li>
                        </ul>
                    </div>
                </li>
                <li>
                    <a href="about_us.html"><h1 class="nav-list-item">About Us</h1></a>
                </li>
                <li>
                    <a href="contacts.html"><h1 class="nav-list-item">Contacts</h1></a>
                </li>
            </ul>
        </nav>

        <main class="l-2-col-grid">
            <article>
                <section>
                    <h2 class="section-header">Branches</h2>
                    <h3>Prague</h3>
                    <span class="vertical-divider"></span>
                    <p>Calle Bernardo de la Torre 19, 35007<br/>
                        Las Palmas de Gran Canaria,<br/>
                        Las Palmas, España
                    </p>
                    <span class="vertical-divider"></span>
                    <span class="vertical-divider"></span>
                    <h3>Brno</h3>
                    <span class="vertical-divider"></span>
                    <p>Calle Bernardo de la Torre 19, 35007<br/>
                        Las Palmas de Gran Canaria,<br/>
                        Las Palmas, España
                    </p>
                </section>
                <section>
                    <h2 class="section-header">Reach Us</h2>

                    <p><a>+420 222 333 444 555</a></p>

                    <span class="vertical-divider"></span>
                    <p><a>info(at)fact.cz</a></p>
                    <p><a>business(at)fact.cz</a></p>

                    <span class="vertical-divider"></span>
                    <p>Instagram.com/Fact</p>
                </section>
                <section>
                    <h2 class="section-header">Billing info</h2>

                    <p>123456789</p>
                    <p>123456789</p>
                </section>
            </article>
            <iframe id="map" src="https://www.google.com/maps/d/embed?mid=1t9l0eKbjK-zqoXbCLD1VOYmHt682xpW0"></iframe>
        </main>



        <form id="contact-form">
            <table>
                <tr>
                    <th colspan="3">
                        <h5>Contact form</h5>
                    </th>
                </tr>
                <tr>
                    <td><input id="form-first-name" type="text" placeholder="*First name"></td>
                    <td><input id="form-last-name" type="text" placeholder="*Last name"></td>
                    <td class="error-message" colspan="1"></td>
                </tr>
                <tr>
                    <td colspan="2"><input id="form-email" type="text" placeholder="*Email"></td>
                    <td class="error-message" colspan="1"></td>
                </tr>
                <tr>
                    <td colspan="2"><input id="form-email-again" type="text" placeholder="*Repeat your email">
                    </td>
                    <td class="error-message" colspan="1"></td>
                </tr>
                <tr>
                    <td colspan="2"><input id="form-phone" class="phone-input" type="tel" placeholder="Phone number">
                    </td>
                    <td class="error-message" colspan="1"></td>
                </tr>
                <tr>
                    <td colspan="2"><input type="text" placeholder="Subject" maxlength="60"></td>
                </tr>
                <tr>
                    <td colspan="2"><textarea id="form-textarea" placeholder="Write a comment..."></textarea></td>
                    <td class="error-message" colspan="1"></td>
                </tr>
                <tr>
                    <td><input type="submit" value="Send"></td>
                </tr>
            </table>
        </form>

         <script>


            const form = document.getElementById('contact-form');

            const firstName = document.getElementById('form-first-name');
            const lastName = document.getElementById('form-last-name');

            const email = document.getElementById('form-email');
            const emailAgain = document.getElementById('form-email-again');

            const phone = document.getElementById('form-phone');

            const contactText = document.getElementById('form-textarea');

            form.addEventListener('submit', (e) => {

                if (firstName.value === '' || firstName.value == null) {
                    showErrorMessage(e, firstName, 'Enter your name!');
                    firstName.focus();
                    return;
                } else {
                    removeErrorMessage(firstName);
                }

                if (lastName.value === '' || lastName.value == null) {
                    showErrorMessage(e, lastName, 'Enter your name!');
                    lastName.focus();
                    return;
                } else {
                    removeErrorMessage(lastName);
                }

                if (email.value === '' || email.value == null) {
                    showErrorMessage(e, email, 'Enter your email!');
                    removeErrorMessage(emailAgain);
                    email.focus();
                    return;
                } else if (!email.value.match('(?:[a-z0-9!#$%&\'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&\'*+/=?^_`{|}~-]+)*|&quot;(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\\\[\x01-\x09\x0b\x0c\x0e-\x7f])*&quot;)@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\\[(?:(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9]))\\.){3}(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9])|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\\])')) {
                    showErrorMessage(e, email, 'This is not valid email address!');
                    removeErrorMessage(emailAgain);
                    email.focus();
                    return;
                } else {
                    removeErrorMessage(email);
                }

                if (emailAgain.value === '' || emailAgain.value == null) {
                    showErrorMessage(e, emailAgain, 'Repeat your email!');
                    emailAgain.focus();
                    return;
                } else if (!emailAgain.value.match('(?:[a-z0-9!#$%&\'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&\'*+/=?^_`{|}~-]+)*|&quot;(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\\\[\x01-\x09\x0b\x0c\x0e-\x7f])*&quot;)@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\\[(?:(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9]))\\.){3}(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9])|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\\])')) {
                    showErrorMessage(e, emailAgain, 'This is not valid email address!');
                    emailAgain.focus();
                    return;
                } else {
                    removeErrorMessage(emailAgain);
                }

                if (email.value !== emailAgain.value) {
                    showErrorMessage(e, emailAgain, 'The email address is different.');
                    email.focus();
                    return;
                } else {
                    removeErrorMessage(emailAgain);
                }

                if (phone.value !== '' && !phone.value.match('^\\+?[0-9]{8,12}$')) {
                    showErrorMessage(e, phone, 'Phone number format is not valid.');
                    phone.focus();
                    return;
                } else {
                    removeErrorMessage(phone);
                }

                if (contactText.value === '' || contactText.value == null) {
                    showErrorMessage(e, contactText, 'Write something to the message body.');
                    contactText.focus();
                } else {
                    removeErrorMessage(contactText);
                }

            });

            firstName.addEventListener('input', (e) => {
                removeErrorMessage(firstName);
            });

            lastName.addEventListener('input', (e) => {
                removeErrorMessage(lastName);
            });

            email.addEventListener('change', (e) => {
                console.log('email changes');
                if (email.value === '' || email.value == null) {
                    showErrorMessage(e, email, 'Enter your email!');
                    removeErrorMessage(emailAgain);
                    email.focus();
                } else if (!email.value.match('(?:[a-z0-9!#$%&\'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&\'*+/=?^_`{|}~-]+)*|&quot;(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\\\[\x01-\x09\x0b\x0c\x0e-\x7f])*&quot;)@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\\[(?:(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9]))\\.){3}(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9])|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\\])')) {
                    showErrorMessage(e, email, 'This is not valid email address!');
                    removeErrorMessage(emailAgain);
                    email.focus();
                } else {
                    removeErrorMessage(email);
                }
            });

            emailAgain.addEventListener('input', (e) => {
                if (email.value === emailAgain.value) {
                    removeErrorMessage(emailAgain);
                }
            });

            emailAgain.addEventListener('change', (e) => {
                if (!emailAgain.value.match('(?:[a-z0-9!#$%&\'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&\'*+/=?^_`{|}~-]+)*|&quot;(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\\\[\x01-\x09\x0b\x0c\x0e-\x7f])*&quot;)@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\\[(?:(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9]))\\.){3}(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9])|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\\])')) {
                    showErrorMessage(e, emailAgain, 'This is not valid email address!');
                    emailAgain.focus();
                } else if (email.value !== emailAgain.value) {
                    showErrorMessage(e, emailAgain, 'The email address is different.');
                    emailAgain.focus();
                }
            });

            phone.addEventListener('change', (e) => {
                if (phone.value !== '' && !phone.value.match('^\\+?[0-9]{8,12}$')) {
                    showErrorMessage(e, phone, 'Phone number format is not valid.');
                    phone.focus();
                }
            });

            phone.addEventListener('input', (e) => {
                if (phone.value.match('^\\+?[0-9]{8,12}$') || phone.value === '') {
                    removeErrorMessage(phone);
                }
            });

            contactText.addEventListener('input', (e) => {
                if (contactText.value !== '') {
                    removeErrorMessage(contactText);
                }
            });

            function showErrorMessage(event, input, errorMessage) {
                event.preventDefault();
                input.parentElement.parentElement.getElementsByClassName('error-message')[0].innerText = errorMessage;
            }

            function removeErrorMessage(input) {
                input.parentElement.parentElement.getElementsByClassName('error-message')[0].innerText = '';
            }

        </script>

        <footer id="footer">
            <!--Not correctly centered-->
            <h5>© 2019 Fact s.r.o.</h5>
            <span class="word-divider"></span>
            <h5><a href="https://www.instagram.com">Instagram</a></h5>
        </footer>
    </div>
</div>
</body>
</html>